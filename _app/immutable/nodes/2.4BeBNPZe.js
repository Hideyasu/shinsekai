import{s as X,a as se,x as M,u as oe,g as ae,b as ie,y as Ie,z as J,r as Se,o as Ce,e as Ve}from"../chunks/scheduler.CfYsyzRB.js";import{S as K,i as $,z as We,u as le,A as Oe,a as N,d as h,B as ne,g as H,h as m,p as O,q as S,C as Ae,l as P,m as U,o as B,r as L,e as y,s as F,t as ke,D as Ge,c as E,f as R,b as je,n as j,E as te,F as we,j as Te,v as Ze,x as Je}from"../chunks/index.C1Z4_kdC.js";import{a as De,b as Ye,c as ze}from"../chunks/index.CU4dFde9.js";const Fe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ne(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function x(s,e){const o={},t={},l={$$scope:1};let n=s.length;for(;n--;){const a=s[n],c=e[n];if(c){for(const d in a)d in c||(t[d]=1);for(const d in c)l[d]||(o[d]=c[d],l[d]=1);s[n]=c}else for(const d in a)l[d]=1}for(const a in t)a in o||(o[a]=void 0);return o}function fe(s){return typeof s=="object"&&s!==null?s:{}}const Re=!0,Xe=!1,ft=Object.freeze(Object.defineProperty({__proto__:null,prerender:Re,ssr:Xe},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-svelte v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function Ee(s,e,o){const t=s.slice();return t[11]=e[o][0],t[12]=e[o][1],t}function ce(s){let e,o=[s[12]],t={};for(let l=0;l<o.length;l+=1)t=M(t,o[l]);return{c(){e=We(s[11]),this.h()},l(l){e=Oe(l,s[11],{}),N(e).forEach(h),this.h()},h(){ne(e,t)},m(l,n){H(l,e,n)},p(l,n){ne(e,t=x(o,[n&32&&l[12]]))},d(l){l&&h(e)}}}function Me(s){let e=s[11],o,t=s[11]&&ce(s);return{c(){t&&t.c(),o=le()},l(l){t&&t.l(l),o=le()},m(l,n){t&&t.m(l,n),H(l,o,n)},p(l,n){l[11]?e?X(e,l[11])?(t.d(1),t=ce(l),e=l[11],t.c(),t.m(o.parentNode,o)):t.p(l,n):(t=ce(l),e=l[11],t.c(),t.m(o.parentNode,o)):e&&(t.d(1),t=null,e=l[11])},d(l){l&&h(o),t&&t.d(l)}}}function Pe(s){let e,o,t,l,n,a=Ne(s[5]),c=[];for(let i=0;i<a.length;i+=1)c[i]=Me(Ee(s,a,i));const d=s[10].default,u=se(d,s,s[9],null);let g=[ye,s[7],{width:s[2]},{height:s[2]},{stroke:s[1]},{"stroke-width":t=s[4]?Number(s[3])*24/Number(s[2]):s[3]},{class:l=s[6]("lucide-icon","lucide",s[0]?`lucide-${s[0]}`:"",s[8].class)}],_={};for(let i=0;i<g.length;i+=1)_=M(_,g[i]);return{c(){e=We("svg");for(let i=0;i<c.length;i+=1)c[i].c();o=le(),u&&u.c(),this.h()},l(i){e=Oe(i,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var f=N(e);for(let r=0;r<c.length;r+=1)c[r].l(f);o=le(),u&&u.l(f),f.forEach(h),this.h()},h(){ne(e,_)},m(i,f){H(i,e,f);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(e,null);m(e,o),u&&u.m(e,null),n=!0},p(i,[f]){if(f&32){a=Ne(i[5]);let r;for(r=0;r<a.length;r+=1){const p=Ee(i,a,r);c[r]?c[r].p(p,f):(c[r]=Me(p),c[r].c(),c[r].m(e,o))}for(;r<c.length;r+=1)c[r].d(1);c.length=a.length}u&&u.p&&(!n||f&512)&&oe(u,d,i,i[9],n?ie(d,i[9],f,null):ae(i[9]),null),ne(e,_=x(g,[ye,f&128&&i[7],(!n||f&4)&&{width:i[2]},(!n||f&4)&&{height:i[2]},(!n||f&2)&&{stroke:i[1]},(!n||f&28&&t!==(t=i[4]?Number(i[3])*24/Number(i[2]):i[3]))&&{"stroke-width":t},(!n||f&257&&l!==(l=i[6]("lucide-icon","lucide",i[0]?`lucide-${i[0]}`:"",i[8].class)))&&{class:l}]))},i(i){n||(O(u,i),n=!0)},o(i){S(u,i),n=!1},d(i){i&&h(e),Ae(c,i),u&&u.d(i)}}}function Ue(s,e,o){const t=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let l=Ie(e,t),{$$slots:n={},$$scope:a}=e,{name:c=void 0}=e,{color:d="currentColor"}=e,{size:u=24}=e,{strokeWidth:g=2}=e,{absoluteStrokeWidth:_=!1}=e,{iconNode:i=[]}=e;const f=(...r)=>r.filter((p,D,T)=>!!p&&T.indexOf(p)===D).join(" ");return s.$$set=r=>{o(8,e=M(M({},e),J(r))),o(7,l=Ie(e,t)),"name"in r&&o(0,c=r.name),"color"in r&&o(1,d=r.color),"size"in r&&o(2,u=r.size),"strokeWidth"in r&&o(3,g=r.strokeWidth),"absoluteStrokeWidth"in r&&o(4,_=r.absoluteStrokeWidth),"iconNode"in r&&o(5,i=r.iconNode),"$$scope"in r&&o(9,a=r.$$scope)},e=J(e),[c,d,u,g,_,i,f,l,e,a,n]}class de extends K{constructor(e){super(),$(this,e,Ue,Pe,X,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Be(s){let e;const o=s[2].default,t=se(o,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&oe(t,o,l,l[3],e?ie(o,l[3],n,null):ae(l[3]),null)},i(l){e||(O(t,l),e=!0)},o(l){S(t,l),e=!1},d(l){t&&t.d(l)}}}function Le(s){let e,o;const t=[{name:"mic-off"},s[1],{iconNode:s[0]}];let l={$$slots:{default:[Be]},$$scope:{ctx:s}};for(let n=0;n<t.length;n+=1)l=M(l,t[n]);return e=new de({props:l}),{c(){P(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,a){B(e,n,a),o=!0},p(n,[a]){const c=a&3?x(t,[t[0],a&2&&fe(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:n}),e.$set(c)},i(n){o||(O(e.$$.fragment,n),o=!0)},o(n){S(e.$$.fragment,n),o=!1},d(n){L(e,n)}}}function qe(s,e,o){let{$$slots:t={},$$scope:l}=e;const n=[["line",{x1:"2",x2:"22",y1:"2",y2:"22"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22"}]];return s.$$set=a=>{o(1,e=M(M({},e),J(a))),"$$scope"in a&&o(3,l=a.$$scope)},e=J(e),[n,e,t,l]}class Qe extends K{constructor(e){super(),$(this,e,qe,Le,X,{})}}function He(s){let e;const o=s[2].default,t=se(o,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&oe(t,o,l,l[3],e?ie(o,l[3],n,null):ae(l[3]),null)},i(l){e||(O(t,l),e=!0)},o(l){S(t,l),e=!1},d(l){t&&t.d(l)}}}function Ke(s){let e,o;const t=[{name:"mic"},s[1],{iconNode:s[0]}];let l={$$slots:{default:[He]},$$scope:{ctx:s}};for(let n=0;n<t.length;n+=1)l=M(l,t[n]);return e=new de({props:l}),{c(){P(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,a){B(e,n,a),o=!0},p(n,[a]){const c=a&3?x(t,[t[0],a&2&&fe(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:n}),e.$set(c)},i(n){o||(O(e.$$.fragment,n),o=!0)},o(n){S(e.$$.fragment,n),o=!1},d(n){L(e,n)}}}function $e(s,e,o){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22"}]];return s.$$set=a=>{o(1,e=M(M({},e),J(a))),"$$scope"in a&&o(3,l=a.$$scope)},e=J(e),[n,e,t,l]}class xe extends K{constructor(e){super(),$(this,e,$e,Ke,X,{})}}function et(s){let e;const o=s[2].default,t=se(o,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&oe(t,o,l,l[3],e?ie(o,l[3],n,null):ae(l[3]),null)},i(l){e||(O(t,l),e=!0)},o(l){S(t,l),e=!1},d(l){t&&t.d(l)}}}function tt(s){let e,o;const t=[{name:"phone"},s[1],{iconNode:s[0]}];let l={$$slots:{default:[et]},$$scope:{ctx:s}};for(let n=0;n<t.length;n+=1)l=M(l,t[n]);return e=new de({props:l}),{c(){P(e.$$.fragment)},l(n){U(e.$$.fragment,n)},m(n,a){B(e,n,a),o=!0},p(n,[a]){const c=a&3?x(t,[t[0],a&2&&fe(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(c.$$scope={dirty:a,ctx:n}),e.$set(c)},i(n){o||(O(e.$$.fragment,n),o=!0)},o(n){S(e.$$.fragment,n),o=!1},d(n){L(e,n)}}}function lt(s,e,o){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}]];return s.$$set=a=>{o(1,e=M(M({},e),J(a))),"$$scope"in a&&o(3,l=a.$$scope)},e=J(e),[n,e,t,l]}class nt extends K{constructor(e){super(),$(this,e,lt,tt,X,{})}}const{document:ue}=Fe;function st(s){let e,o;return e=new Qe({props:{class:"w-8 h-8"}}),{c(){P(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){B(e,t,l),o=!0},i(t){o||(O(e.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function ot(s){let e,o;return e=new xe({props:{class:"w-8 h-8"}}),{c(){P(e.$$.fragment)},l(t){U(e.$$.fragment,t)},m(t,l){B(e,t,l),o=!0},i(t){o||(O(e.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),o=!1},d(t){L(e,t)}}}function at(s){let e,o,t,l,n,a,c,d,u,g,_,i,f,r,p,D,T,q,I,W,w,k,Y,v,C,V,Q,me;const he=[ot,st],z=[];function ge(b,A){return b[1]?0:1}return w=ge(s),k=z[w]=he[w](s),C=new nt({props:{class:"w-8 h-8"}}),{c(){e=y("meta"),o=F(),t=y("section"),l=y("p"),n=ke("ID: "),a=y("span"),c=ke(s[3]),d=F(),u=y("article"),g=y("div"),_=y("video"),i=F(),f=y("div"),r=F(),p=y("div"),D=F(),T=y("div"),q=F(),I=y("div"),W=y("button"),k.c(),Y=F(),v=y("button"),P(C.$$.fragment),this.h()},l(b){const A=Ge("svelte-1j7of3n",ue.head);e=E(A,"META",{name:!0,content:!0,class:!0}),A.forEach(h),o=R(b),t=E(b,"SECTION",{class:!0});var G=N(t);l=E(G,"P",{class:!0});var re=N(l);n=je(re,"ID: "),a=E(re,"SPAN",{id:!0,class:!0});var _e=N(a);c=je(_e,s[3]),_e.forEach(h),re.forEach(h),d=R(G),u=E(G,"ARTICLE",{class:!0});var Z=N(u);g=E(Z,"DIV",{class:!0});var be=N(g);_=E(be,"VIDEO",{class:!0}),N(_).forEach(h),be.forEach(h),i=R(Z),f=E(Z,"DIV",{class:!0}),N(f).forEach(h),r=R(Z),p=E(Z,"DIV",{class:!0}),N(p).forEach(h),D=R(Z),T=E(Z,"DIV",{class:!0}),N(T).forEach(h),Z.forEach(h),q=R(G),I=E(G,"DIV",{class:!0});var ee=N(I);W=E(ee,"BUTTON",{class:!0});var ve=N(W);k.l(ve),ve.forEach(h),Y=R(ee),v=E(ee,"BUTTON",{class:!0});var pe=N(v);U(C.$$.fragment,pe),pe.forEach(h),ee.forEach(h),G.forEach(h),this.h()},h(){ue.title="天才たちの恋愛頭脳戦通話アプリ",j(e,"name","description"),j(e,"content","SvelteKit video call application"),j(e,"class","svelte-1sjl39g"),j(a,"id","my-id"),j(a,"class","svelte-1sjl39g"),j(l,"class","text-center svelte-1sjl39g"),j(_,"class","w-full h-full object-cover svelte-1sjl39g"),_.muted=!0,_.playsInline=!0,j(g,"class","panel flex-grow basis-[400px] svelte-1sjl39g"),j(f,"class","panel flex-grow basis-[500px] cartoon-frame svelte-1sjl39g"),j(p,"class","panel flex-grow basis-[500px] cartoon-frame svelte-1sjl39g"),j(T,"class","panel flex-grow basis-[400px] cartoon-frame svelte-1sjl39g"),j(u,"class","flex flex-wrap font-comic-sans p-[5vmin] mx-64  svelte-1sjl39g"),j(W,"class","w-16 h-16 rounded-full border-2 border-black flex items-center justify-center bg-gray-200 svelte-1sjl39g"),j(v,"class","w-16 h-16 rounded-full border-2 border-black flex items-center justify-center transition-colors duration-300 svelte-1sjl39g"),te(v,"bg-[#57EEF8]",!s[0]),te(v,"bg-[#EE1971]",s[0]),j(I,"class","flex space-x-4 justify-center mt-4 svelte-1sjl39g"),j(t,"class","min-h-screen bg-gray-100 svelte-1sjl39g")},m(b,A){m(ue.head,e),H(b,o,A),H(b,t,A),m(t,l),m(l,n),m(l,a),m(a,c),m(t,d),m(t,u),m(u,g),m(g,_),s[6](_),m(u,i),m(u,f),m(u,r),m(u,p),m(u,D),m(u,T),m(t,q),m(t,I),m(I,W),z[w].m(W,null),m(I,Y),m(I,v),B(C,v,null),V=!0,Q||(me=[we(W,"click",s[5]),we(v,"click",s[4])],Q=!0)},p(b,[A]){(!V||A&8)&&Te(c,b[3]);let G=w;w=ge(b),w!==G&&(Je(),S(z[G],1,1,()=>{z[G]=null}),Ze(),k=z[w],k||(k=z[w]=he[w](b),k.c()),O(k,1),k.m(W,null)),(!V||A&1)&&te(v,"bg-[#57EEF8]",!b[0]),(!V||A&1)&&te(v,"bg-[#EE1971]",b[0])},i(b){V||(O(k),O(C.$$.fragment,b),V=!0)},o(b){S(k),S(C.$$.fragment,b),V=!1},d(b){b&&(h(o),h(t)),h(e),s[6](null),z[w].d(),L(C),Q=!1,Se(me)}}}function it(s,e,o){let t=!0,l=!0;function n(){o(0,t=!t),t?T():D()}function a(){o(1,l=!l),r&&(r.track.enabled=l)}let c,d=[],u="",g,_,i,f,r,p;Ce(async()=>{d=Array.from(document.getElementsByClassName("cartoon-frame")),typeof window<"u"&&window.RTCPeerConnection&&(i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4OGY1OTgwNi1lNWM3LTRmZWYtOGMxMi1jOGQ2ZWRhNTRkYWMiLCJpYXQiOjE3MjY5MTc2MDIsImV4cCI6MTcyNzAwNDAwMiwic2NvcGUiOnsiYXBwIjp7ImlkIjoiZWJlMDBjNjMtMDU1OS00ZjZhLTkyZGEtNWViNGMwNDE1NjVjIiwidHVybiI6dHJ1ZSwiYWN0aW9ucyI6WyJyZWFkIl0sImNoYW5uZWxzIjpbeyJpZCI6IioiLCJuYW1lIjoiKiIsImFjdGlvbnMiOlsid3JpdGUiXSwibWVtYmVycyI6W3siaWQiOiIqIiwibmFtZSI6IioiLCJhY3Rpb25zIjpbIndyaXRlIl0sInB1YmxpY2F0aW9uIjp7ImFjdGlvbnMiOlsid3JpdGUiXX0sInN1YnNjcmlwdGlvbiI6eyJhY3Rpb25zIjpbIndyaXRlIl19fV0sInNmdUJvdHMiOlt7ImFjdGlvbnMiOlsid3JpdGUiXSwiZm9yd2FyZGluZ3MiOlt7ImFjdGlvbnMiOlsid3JpdGUiXX1dfV19XX19fQ.lg0ghxp5uR-WsnIGorzAdZq32IVAV64tQFZZxPKYf50")});async function D(){_=await De.Create(i),g=await Ye.FindOrCreate(_,{type:"p2p",name:"love_is_war"}),f=await g.join(),o(3,u=f.id);const{audio:I,video:W}=await ze.createMicrophoneAudioAndCameraStream();r=I,p=W,W.attach(c),await c.play(),await f.publish(I),await f.publish(W);const w=async k=>{if(k.publisher.id===f.id)return;const{stream:Y}=await f.subscribe(k.id);let v,C;const V=d.find(Q=>Q.childElementCount===0);if(V)switch(Y.track.kind){case"video":v=document.createElement("video"),v.playsInline=!0,v.autoplay=!0,v.className="w-full h-full object-cover",Y.attach(v),V.appendChild(v),C=document.createElement("audio"),C.autoplay=!0,Y.attach(C);break;case"audio":break;default:return}};g.publications.forEach(w),g.onStreamPublished.add(k=>w(k.publication))}async function T(){f&&(await f.leave(),await g.dispose(),o(3,u=""),d.forEach(I=>I.replaceChildren()),r&&(r.track.stop(),r=null),p&&(p.track.stop(),p=null))}function q(I){Ve[I?"unshift":"push"](()=>{c=I,o(2,c)})}return[t,l,c,u,n,a,q]}class dt extends K{constructor(e){super(),$(this,e,it,at,X,{})}}export{dt as component,ft as universal};
